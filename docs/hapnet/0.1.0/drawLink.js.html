<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drawLink.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: drawLink.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as PIXI from 'pixi.js'
import { conformsTo,  isNumber,  isObject,defaultsDeep } from 'lodash-es';
import { calLineHitArea } from './utils'
/**
 * Link object
 */
 class LINK extends PIXI.Container {

    constructor(linkOptions, linkStyles, drawCoarseGraph = false, debug = false) {
        super();

        const isValidate = conformsTo(linkOptions, {
            source: d => isObject(d),
            target: d => isObject(d),
            distance: d => isNumber(d),
            meta: d => isObject(d)
        }) &amp;&amp; conformsTo(linkStyles, {
            linkWidth: d => isNumber(d),
            linkColor: d => isNumber(d)
        })

        if (isValidate) {
            this.linkOptions = linkOptions;
            this.linkStyles = linkStyles;
        } else {
            console.log("Can not draw link");
            console.log(linkOptions, linkStyles)
        }

        // 
        this.name =  [linkOptions.source.id,linkOptions.target.id].sort().join("_") ; // set unique name for each link.
        
        this.chart = this.addChild(new PIXI.Graphics());
        this.chart.interactive = true;
        this.chart.buttonMode = true;

        // this.chart.on("pointerdown", function (e) {
        //     /**
        //      *  'this' is the polygen object. It's parent is the link object
        //      */
        //     // console.log(e)
            
        //     console.log(this)
            
        //     const linkObj = this.parent

        //     console.log("link", linkObj)
        // });

    }

    draw(drawOptions) {

        if(drawOptions === undefined){
            drawOptions = {}
        }

        const defaultDrawOptions = { 
            heighLight:false
        }
        defaultsDeep(drawOptions, defaultDrawOptions);
        this.chart.clear();
        if(drawOptions.heighLight == false){
            this.chart
            .lineStyle(this.linkStyles.linkWidth, this.linkStyles.linkColor, 1)
            .moveTo(this.linkOptions.source.x, this.linkOptions.source.y)
            .lineTo(this.linkOptions.target.x, this.linkOptions.target.y);
        }else{
            this.chart
            .lineStyle(this.linkStyles.linkWidth*2, 0xFF0000, 1)
            .moveTo(this.linkOptions.source.x, this.linkOptions.source.y)
            .lineTo(this.linkOptions.target.x, this.linkOptions.target.y);
        }





        // let rawHitPath = this.chart.geometry.points
        // let point4 = rawHitPath.slice(7,8)
        // console.log(point4)
        // console.log(hitPath)

        /**
         * calculate hit area of the link
         */
        const hitPath = calLineHitArea(
            this.linkOptions.source.x, 
            this.linkOptions.source.y, 
            this.linkOptions.target.x, 
            this.linkOptions.target.y, 
            this.linkStyles.linkWidth
            )

        this.chart.hitArea = new PIXI.Polygon(hitPath)
    }
}

export {LINK}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="HapNet.html">HapNet</a></li><li><a href="LINK.html">LINK</a></li><li><a href="SINGLEPIE.html">SINGLEPIE</a></li></ul><h3>Global</h3><ul><li><a href="global.html#calLineHitArea">calLineHitArea</a></li><li><a href="global.html#defaultOptions">defaultOptions</a></li><li><a href="global.html#hapnetConfig">hapnetConfig</a></li><li><a href="global.html#preDefinedPalettesList">preDefinedPalettesList</a></li><li><a href="global.html#radius">radius</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Sun Oct 09 2022 15:03:44 GMT+0800 (China Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
